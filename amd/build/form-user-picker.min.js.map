{"version":3,"file":"form-user-picker.min.js","sources":["../src/form-user-picker.js"],"sourcesContent":["define(['core/ajax', 'jquery'], function(ajax, $) {\n\n    return {\n        transport: function(selector, query, success, failure) {\n\n            let promises = null;\n            if (typeof query === \"undefined\") {\n                query = '';\n            }\n\n            let calls = [{\n                methodname: 'tool_formbuilder_search_users', args: {\n                    search: query\n                }\n            }];\n\n            promises = ajax.call(calls);\n            $.when.apply($.when, promises).done(function(data) {\n                success(data);\n            }).fail(failure);\n\n        },\n\n        processResults: function(selector, data) {\n            let results = [];\n            for (let i = 0; i < data.users.length; i++) {\n\n                let label = data.users[i].fullname;\n                if (data.users[i].idnumber.length) {\n                    label += ' (' + data.users[i].idnumber + ')';\n                }\n\n                results.push({\n                    value: data.users[i].id,\n                    label: label\n                });\n\n            }\n            return results;\n        },\n\n    };\n\n});"],"names":["define","ajax","$","transport","selector","query","success","failure","promises","calls","methodname","args","search","call","when","apply","done","data","fail","processResults","results","i","users","length","label","fullname","idnumber","push","value","id"],"mappings":"AAAAA,2CAAO,CAAC,YAAa,WAAW,SAASC,KAAMC,SAEpC,CACHC,UAAW,SAASC,SAAUC,MAAOC,QAASC,aAEtCC,SAAW,UACM,IAAVH,QACPA,MAAQ,QAGRI,MAAQ,CAAC,CACTC,WAAY,gCAAiCC,KAAM,CAC/CC,OAAQP,SAIhBG,SAAWP,KAAKY,KAAKJ,OACrBP,EAAEY,KAAKC,MAAMb,EAAEY,KAAMN,UAAUQ,MAAK,SAASC,MACzCX,QAAQW,SACTC,KAAKX,UAIZY,eAAgB,SAASf,SAAUa,UAC3BG,QAAU,OACT,IAAIC,EAAI,EAAGA,EAAIJ,KAAKK,MAAMC,OAAQF,IAAK,KAEpCG,MAAQP,KAAKK,MAAMD,GAAGI,SACtBR,KAAKK,MAAMD,GAAGK,SAASH,SACvBC,OAAS,KAAOP,KAAKK,MAAMD,GAAGK,SAAW,KAG7CN,QAAQO,KAAK,CACTC,MAAOX,KAAKK,MAAMD,GAAGQ,GACrBL,MAAOA,eAIRJ"}